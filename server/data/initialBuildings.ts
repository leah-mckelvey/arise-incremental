import type { Building, Resources } from '../../shared/types.js';

// Helper to create full Resources object with defaults
const createResources = (partial: Partial<Resources> = {}): Resources => {
  return {
    essence: 0,
    crystals: 0,
    gold: 0,
    souls: 0,
    attraction: 0,
    gems: 0,
    knowledge: 0,
    ...partial,
  };
};

export const initialBuildings: Record<string, Building> = {
  essenceExtractor: {
    id: 'essenceExtractor',
    name: 'âš—ï¸ Essence Extractor',
    description: 'Automatically extracts essence from the environment',
    count: 0,
    baseCost: createResources({ essence: 10 }),
    costMultiplier: 1.15,
    produces: { essence: 3 },
    perSecond: 0.1,
  },
  trainingGround: {
    id: 'trainingGround',
    name: 'ğŸ‹ï¸ Training Ground',
    description: 'Provides passive XP gain for your hunter',
    count: 0,
    baseCost: createResources({ essence: 30, gold: 20 }),
    costMultiplier: 1.15,
    xpPerSecond: 0.5,
  },
  hunterGuild: {
    id: 'hunterGuild',
    name: 'ğŸ›ï¸ Hunter Guild',
    description: 'Generates attraction for recruiting allies',
    count: 0,
    baseCost: createResources({ essence: 150, crystals: 100, gold: 100 }),
    costMultiplier: 1.15,
    produces: { attraction: 1 },
    perSecond: 0.1,
  },
  mageTower: {
    id: 'mageTower',
    name: 'ğŸ—¼ Mage Tower',
    description: 'Produces rare gems through arcane rituals',
    count: 0,
    baseCost: createResources({ essence: 100, crystals: 100, gold: 50 }),
    costMultiplier: 1.15,
    produces: { gems: 1 },
    perSecond: 0.05,
  },
  crystalMine: {
    id: 'crystalMine',
    name: 'ğŸ’ Crystal Mine',
    description: 'Extracts valuable crystals from dungeon depths',
    count: 0,
    baseCost: createResources({ essence: 50, gold: 50 }),
    costMultiplier: 1.15,
    produces: { crystals: 1 },
    perSecond: 0.2,
  },
  library: {
    id: 'library',
    name: 'ğŸ“š Library',
    description: 'Generates knowledge points for research',
    count: 0,
    baseCost: createResources({ essence: 25, gold: 25 }),
    costMultiplier: 1.15,
    produces: { knowledge: 1 },
    perSecond: 0.1,
  },
  merchantGuild: {
    id: 'merchantGuild',
    name: 'ğŸ’° Merchant Guild',
    description: 'Generates gold through trade and commerce',
    count: 0,
    baseCost: createResources({ essence: 20, crystals: 10 }),
    costMultiplier: 1.15,
    produces: { gold: 1 },
    perSecond: 0.15,
  },
  // Storage buildings
  essenceVault: {
    id: 'essenceVault',
    name: 'ğŸ“¦ Essence Vault',
    description: 'Increases essence storage capacity',
    count: 0,
    baseCost: createResources({ essence: 30, gold: 20 }),
    costMultiplier: 1.12,
    increasesCaps: { essence: 50 },
  },
  crystalWarehouse: {
    id: 'crystalWarehouse',
    name: 'ğŸª Crystal Warehouse',
    description: 'Increases crystal storage capacity',
    count: 0,
    baseCost: createResources({ essence: 40, crystals: 20 }),
    costMultiplier: 1.12,
    increasesCaps: { crystals: 25 },
  },
  goldVault: {
    id: 'goldVault',
    name: 'ğŸ¦ Gold Vault',
    description: 'Increases gold storage capacity',
    count: 0,
    baseCost: createResources({ essence: 35, gold: 30 }),
    costMultiplier: 1.12,
    increasesCaps: { gold: 500 },
  },
  soulChamber: {
    id: 'soulChamber',
    name: 'ğŸ‘» Soul Chamber',
    description: 'Increases soul storage capacity',
    count: 0,
    baseCost: createResources({ essence: 100, souls: 5 }),
    costMultiplier: 1.12,
    increasesCaps: { souls: 10 },
  },
  gemVault: {
    id: 'gemVault',
    name: 'ğŸ’ Gem Vault',
    description: 'Increases gem storage capacity',
    count: 0,
    baseCost: createResources({ essence: 80, gems: 10 }),
    costMultiplier: 1.12,
    increasesCaps: { gems: 50 },
  },
  knowledgeArchive: {
    id: 'knowledgeArchive',
    name: 'ğŸ“– Knowledge Archive',
    description: 'Increases knowledge storage capacity',
    count: 0,
    baseCost: createResources({ essence: 50, knowledge: 10 }),
    costMultiplier: 1.12,
    increasesCaps: { knowledge: 25 },
  },
  attractionBeacon: {
    id: 'attractionBeacon',
    name: 'ğŸ”” Attraction Beacon',
    description: 'Increases attraction storage capacity',
    count: 0,
    baseCost: createResources({ essence: 60, attraction: 5 }),
    costMultiplier: 1.12,
    increasesCaps: { attraction: 10 },
  },

  // Advanced buildings (unlocked by research)
  soulHarvester: {
    id: 'soulHarvester',
    name: 'ğŸ‘» Soul Harvester',
    description: 'Harvests souls from defeated enemies. Each soul boosts all production by 1%',
    count: 0,
    baseCost: createResources({
      essence: 300,
      crystals: 300,
      gold: 300,
      gems: 20,
    }),
    costMultiplier: 1.2,
    produces: { souls: 1 },
    perSecond: 0.05,
  },
};
