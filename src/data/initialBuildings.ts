import type { Building } from '../store/buildingsStore';
import type { Resources } from '../store/types';

// Helper to create full Resources object with defaults
const createResources = (partial: Partial<Resources> = {}): Resources => {
  return {
    essence: 0,
    crystals: 0,
    gold: 0,
    souls: 0,
    attraction: 0,
    gems: 0,
    knowledge: 0,
    ...partial,
  };
};

export const initialBuildings: Record<string, Building> = {
  essenceExtractor: {
    id: 'essenceExtractor',
    name: 'âš—ï¸ Essence Extractor',
    description: 'Automatically extracts essence from the environment',
    count: 0,
    baseCost: createResources({ essence: 10 }),
    costMultiplier: 1.15,
    produces: { essence: 3 }, // Increased from 1 to 3
    perSecond: 0.1,
  },
  trainingGround: {
    id: 'trainingGround',
    name: 'ğŸ‹ï¸ Training Ground',
    description: 'Provides passive XP gain for your hunter',
    count: 0,
    baseCost: createResources({ essence: 30, gold: 20 }),
    costMultiplier: 1.15,
    xpPerSecond: 0.5,
  },
  hunterGuild: {
    id: 'hunterGuild',
    name: 'ğŸ›ï¸ Hunter Guild',
    description: 'Generates attraction for recruiting allies',
    count: 0,
    baseCost: createResources({ essence: 150, crystals: 100, gold: 100 }),
    costMultiplier: 1.15,
    produces: { attraction: 1 },
    perSecond: 0.1,
  },
  mageTower: {
    id: 'mageTower',
    name: 'ğŸ—¼ Mage Tower',
    description: 'Produces rare gems through arcane rituals',
    count: 0,
    baseCost: createResources({ essence: 100, crystals: 100, gold: 50 }),
    costMultiplier: 1.15,
    produces: { gems: 1 },
    perSecond: 0.05,
  },
  crystalMine: {
    id: 'crystalMine',
    name: 'ğŸ’ Crystal Mine',
    description: 'Extracts valuable crystals from dungeon depths',
    count: 0,
    baseCost: createResources({ essence: 50, gold: 50 }),
    costMultiplier: 1.15,
    produces: { crystals: 1 },
    perSecond: 0.2,
  },
  library: {
    id: 'library',
    name: 'ğŸ“š Library',
    description: 'Generates knowledge points for research',
    count: 0,
    baseCost: createResources({ essence: 25, gold: 25 }),
    costMultiplier: 1.15,
    produces: { knowledge: 1 },
    perSecond: 0.1,
  },
  merchantGuild: {
    id: 'merchantGuild',
    name: 'ğŸ’° Merchant Guild',
    description: 'Generates gold through trade and commerce',
    count: 0,
    baseCost: createResources({ essence: 20, crystals: 10 }),
    costMultiplier: 1.15,
    produces: { gold: 1 },
    perSecond: 0.15,
  },
  // Storage buildings
  essenceVault: {
    id: 'essenceVault',
    name: 'ğŸ“¦ Essence Vault',
    description: 'Increases essence storage capacity',
    count: 0,
    baseCost: createResources({ essence: 30, gold: 20 }),
    costMultiplier: 1.12,
    increasesCaps: { essence: 50 },
  },
  crystalWarehouse: {
    id: 'crystalWarehouse',
    name: 'ğŸª Crystal Warehouse',
    description: 'Increases crystal storage capacity',
    count: 0,
    baseCost: createResources({ essence: 40, crystals: 20, gold: 40 }),
    costMultiplier: 1.12,
    increasesCaps: { crystals: 25 },
  },
  goldVault: {
    id: 'goldVault',
    name: 'ğŸ¦ Gold Vault',
    description: 'Increases gold storage capacity',
    count: 0,
    baseCost: createResources({ essence: 50, crystals: 50, gold: 25 }),
    costMultiplier: 1.12,
    increasesCaps: { gold: 100 },
  },
  archive: {
    id: 'archive',
    name: 'ğŸ“œ Archive',
    description: 'Increases knowledge storage capacity',
    count: 0,
    baseCost: createResources({ essence: 40, gold: 40, crystals: 35 }),
    costMultiplier: 1.12,
    increasesCaps: { knowledge: 50 },
  },
  // Advanced buildings (unlocked by research)
  soulHarvester: {
    id: 'soulHarvester',
    name: 'ğŸ‘» Soul Harvester',
    description: 'Harvests souls from defeated enemies. Each soul boosts all production by 1%',
    count: 0,
    baseCost: createResources({ essence: 300, crystals: 300, gold: 300, gems: 20 }),
    costMultiplier: 1.2,
    produces: { souls: 1 },
    perSecond: 0.05,
  },

  // Tier 2 Production Buildings
  essenceRefinery: {
    id: 'essenceRefinery',
    name: 'âš—ï¸ Essence Refinery',
    description: 'Advanced essence production. +1% per Crystal Mine owned',
    count: 0,
    baseCost: createResources({ essence: 300, crystals: 300, gold: 200 }),
    costMultiplier: 1.18,
    produces: { essence: 10 }, // Increased from 5 to 10
    perSecond: 0.1,
  },
  crystalReactor: {
    id: 'crystalReactor',
    name: 'ğŸ’  Crystal Reactor',
    description: 'Converts essence into crystals. +1% per Essence Extractor owned',
    count: 0,
    baseCost: createResources({ essence: 300, crystals: 200, gold: 300 }),
    costMultiplier: 1.18,
    produces: { crystals: 3 },
    perSecond: 0.15,
  },
  tradingPost: {
    id: 'tradingPost',
    name: 'ğŸª Trading Post',
    description: 'Advanced gold generation. +2% per Merchant Guild owned',
    count: 0,
    baseCost: createResources({ essence: 400, gold: 600, crystals: 200 }),
    costMultiplier: 1.18,
    produces: { gold: 8 },
    perSecond: 0.12,
  },
  academy: {
    id: 'academy',
    name: 'ğŸ“ Academy',
    description: 'Advanced knowledge production. +1% per Library owned',
    count: 0,
    baseCost: createResources({ essence: 300, gold: 400, crystals: 200, knowledge: 100 }),
    costMultiplier: 1.18,
    produces: { knowledge: 4 },
    perSecond: 0.08,
  },
  soulShrine: {
    id: 'soulShrine',
    name: 'â›©ï¸ Soul Shrine',
    description: 'Amplifies soul collection. +5% per shadow owned',
    count: 0,
    baseCost: createResources({ essence: 500, souls: 50, crystals: 500, gold: 500 }),
    costMultiplier: 1.2,
    produces: { souls: 2 },
    perSecond: 0.03,
  },
  gemWorkshop: {
    id: 'gemWorkshop',
    name: 'ğŸ’ Gem Workshop',
    description: 'Refines raw gems. +2% per Mage Tower owned',
    count: 0,
    baseCost: createResources({ essence: 400, gems: 20, crystals: 300, gold: 400 }),
    costMultiplier: 1.2,
    produces: { gems: 2 },
    perSecond: 0.04,
  },
  recruitmentCenter: {
    id: 'recruitmentCenter',
    name: 'ğŸ¯ Recruitment Center',
    description: 'Attracts powerful hunters. +3% per ally owned',
    count: 0,
    baseCost: createResources({ essence: 600, attraction: 100, crystals: 400, gold: 600 }),
    costMultiplier: 1.2,
    produces: { attraction: 3 },
    perSecond: 0.06,
  },

  // Storage Buildings (Tier 2)
  soulVault: {
    id: 'soulVault',
    name: 'ğŸº Soul Vault',
    description: 'Increases soul storage capacity',
    count: 0,
    baseCost: createResources({ essence: 200, souls: 10, gold: 200, crystals: 100 }),
    costMultiplier: 1.15,
    increasesCaps: { souls: 20 },
  },
  gemVault: {
    id: 'gemVault',
    name: 'ğŸ’  Gem Vault',
    description: 'Increases gem storage capacity',
    count: 0,
    baseCost: createResources({ essence: 100, gems: 5, crystals: 75, gold: 75 }),
    costMultiplier: 1.15,
    increasesCaps: { gems: 15 },
  },
  attractionHall: {
    id: 'attractionHall',
    name: 'ğŸ›ï¸ Attraction Hall',
    description: 'Increases attraction storage capacity',
    count: 0,
    baseCost: createResources({ essence: 150, attraction: 50, crystals: 100, gold: 150 }),
    costMultiplier: 1.15,
    increasesCaps: { attraction: 50 },
  },

  // Synergy Buildings (Tier 3)
  monarchsPalace: {
    id: 'monarchsPalace',
    name: "ğŸ‘‘ Monarch's Palace",
    description: 'Grants +1 Authority per 5 buildings owned. Increases all caps by 10%',
    count: 0,
    baseCost: createResources({ essence: 2000, crystals: 2500, gold: 3000, souls: 100, gems: 50 }),
    costMultiplier: 1.25,
    // Special: grants authority based on total buildings
  },
  shadowNexus: {
    id: 'shadowNexus',
    name: 'ğŸŒ‘ Shadow Nexus',
    description:
      'Each shadow increases all production by 2%. Souls boost shadow effectiveness by 1% each',
    count: 0,
    baseCost: createResources({ essence: 3000, souls: 200, crystals: 4000, gold: 3000, gems: 80 }),
    costMultiplier: 1.3,
    // Special: shadows boost production
  },
  allianceHQ: {
    id: 'allianceHQ',
    name: 'ğŸ¤ Alliance HQ',
    description:
      'Each ally increases all production by 2%. Attraction boosts ally effectiveness by 1% per 10',
    count: 0,
    baseCost: createResources({
      essence: 4000,
      attraction: 500,
      crystals: 4000,
      gold: 5000,
      gems: 100,
    }),
    costMultiplier: 1.3,
    // Special: allies boost production
  },
};
